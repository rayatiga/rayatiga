<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Apache2 Benchmark Project | Rayatiga</title>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="title" content="Apache2 Benchmark Project | Rayatiga" />
        <meta name="description" content="Tool for benchmarking your apache2 based sites. Clone and enjoy bechmarking!" />
        <meta name="author" content="Rayatiga" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://rayatiga.com/project/apache2-benchmark.html" />
        <meta property="og:title" content="Apache2 Benchmark Project | Rayatiga" />
        <meta property="og:description" content="Tool for benchmarking your apache2 based sites. Clone and enjoy bechmarking!" />
        <meta property="og:image" content="https://rayatiga.com/asset/image/brand/rayatiga-og.png" />
        <link rel="stylesheet" href="/asset/css/main.css" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
            crossorigin="anonymous"
        />
        <link rel="stylesheet" href="/asset/css/icon.css" />
        <script defer type="text/javascript" src="/asset/js/main.js"></script>
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
            crossorigin="anonymous"
        ></script>
        <script defer type="text/javascript" src="/asset/js/template.js"></script>
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
        <style>
            .hilite_me {
                width: auto;
                overflow: auto;
                text-align: left;
                max-height: 428px;
                border-radius: 12px;
                padding: 0.2em 0.6em;
                background: #f8f9fa;
                border: 1px solid #212529;
                border-width: 0.1em 0.1em 0.1em 0.8em;
            }
            .hilite_me::-webkit-scrollbar {
                display: none;
            }
            pre {
                margin: 12px;
                line-height: 150%;
            }
        </style>
    </head>
    <body class="bg-light">
        <nav></nav>
        <header><div></div></header>
        <main>
            <div class="container bg-light text-center d-flex flex-column justify-content-center align-items-center single-page">
                <div class="container">
                    <div class="py-4">
                        <h1 class="fw-bold">
                            <span class="fw-lighter">Apache2</span> Benchmark.
                        </h1>
                        <p>
                            Tool for benchmarking your apache2 based sites. Clone and enjoy bechmarking!
                        </p>
                        <div class="hilite_me">
                            <pre><span style="color: #408080; font-style: italic">#!/bin/bash</span>

<span style="color: #408080; font-style: italic"># static color</span>
<span style="color: #19177C">RED</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;\033[0;31m&#39;</span>
<span style="color: #19177C">REDBOLD</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;\033[1;31m&#39;</span>
<span style="color: #19177C">GREEN</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;\e[0;32m&#39;</span>
<span style="color: #19177C">YELLOW</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;\e[0;33m&#39;</span>
<span style="color: #19177C">NC</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;\033[0m&#39;</span>

<span style="color: #408080; font-style: italic"># static background color</span>
<span style="color: #19177C">WHITEONRED</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;\e[1;41m&#39;</span>
<span style="color: #19177C">BGNC</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;\e[0m&#39;</span>

<span style="color: #408080; font-style: italic"># clear the screen</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Clearing the terminal screen...&quot;</span>
sleep 1
clear

<span style="color: #408080; font-style: italic"># checking apache2-utils packages</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;\nChecking prerequisites first. Please wait...\n&quot;</span>
sleep 0.7
<span style="color: #19177C">REQUIRED_PKG</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;apache2-utils&quot;</span>
<span style="color: #19177C">PKG_OK</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>dpkg-query -W --showformat<span style="color: #666666">=</span><span style="color: #BA2121">&#39;${Status}\n&#39;</span> <span style="color: #19177C">$REQUIRED_PKG</span>|grep <span style="color: #BA2121">&quot;install ok installed&quot;</span><span style="color: #008000; font-weight: bold">)</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Checking for $REQUIRED_PKG: ${GREEN}$PKG_OK${NC}\n&quot;</span>
<span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">[</span> <span style="color: #BA2121">&quot;&quot;</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;$PKG_OK&quot;</span> <span style="color: #666666">]</span>; <span style="color: #008000; font-weight: bold">then</span>
<span style="color: #008000; font-weight: bold">    </span><span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;No $REQUIRED_PKG. Setting up $REQUIRED_PKG. This sometime required a password.\n&quot;</span>
sleep 1
sudo apt-get --yes install <span style="color: #19177C">$REQUIRED_PKG</span> 
<span style="color: #408080; font-style: italic"># clear the screen</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;\nClearing the terminal screen...&quot;</span>
sleep 1
clear
<span style="color: #008000; font-weight: bold">fi</span>

<span style="color: #408080; font-style: italic"># double check the packages</span>
<span style="color: #19177C">REQUIRED_PKG</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;apache2-utils&quot;</span>
<span style="color: #19177C">PKG_OK</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">$(</span>dpkg-query -W --showformat<span style="color: #666666">=</span><span style="color: #BA2121">&#39;${Status}\n&#39;</span> <span style="color: #19177C">$REQUIRED_PKG</span>|grep <span style="color: #BA2121">&quot;install ok installed&quot;</span><span style="color: #008000; font-weight: bold">)</span>
<span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">[</span> <span style="color: #BA2121">&quot;&quot;</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;$PKG_OK&quot;</span> <span style="color: #666666">]</span>; <span style="color: #008000; font-weight: bold">then</span>
<span style="color: #008000; font-weight: bold">    </span><span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;${REDBOLD}Can&#39;t find/install $REQUIRED_PKG package(s). Please install manually.${NC}&quot;</span>
<span style="color: #008000">exit </span>1;
<span style="color: #008000; font-weight: bold">fi</span>

<span style="color: #408080; font-style: italic"># delay 1 second</span>
sleep 1

<span style="color: #408080; font-style: italic"># ok if apache2-utils already installed</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;\nOK, $REQUIRED_PKG already installed in your system, now running the tools.\n&quot;</span>

<span style="color: #408080; font-style: italic"># cancelling information 1</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;NOTE: press ${REDBOLD}CTRL + C${NC} at anytime to exit this tool.\n&quot;</span>
sleep 1

<span style="color: #408080; font-style: italic"># loading the tools</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;\nLoading tools...\n&quot;</span>
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=&gt;                      (4%)\r&#39;</span>
sleep 0.4
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;==&gt;                     (11%)\r&#39;</span>
sleep 0.4
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;===&gt;                    (17%)\r&#39;</span>
sleep 0.4
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;====&gt;                   (28%)\r&#39;</span>
sleep 0.4
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=====&gt;                  (33%)\r&#39;</span>
sleep 0.4
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=======&gt;                (49%)\r&#39;</span>
sleep 0.4
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=============&gt;          (68%)\r&#39;</span>
sleep 0.4
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;===================&gt;    (84%)\r&#39;</span>
sleep 0.5
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=====================&gt;  (96%)\r&#39;</span>
sleep 0.5
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=======================&gt;(100%)\r&#39;</span>
sleep 0.5
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;Load completed.               \r&#39;</span>
sleep 0.8
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;\n&#39;</span>

<span style="color: #408080; font-style: italic"># welcome</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;\nWelcome to Apache Bechmark Website!&quot;</span>

<span style="color: #408080; font-style: italic"># disclaimer and warning</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;\n\n${WHITEONRED}!!! PLESE READ CAREFULLY !!!${BGNC}&quot;</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;\n${RED}Please use this program for testing purposes only!&quot;</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;\nAny illegal activities (e.g. DDoS) will be processed by law. So, becareful!\n${NC}&quot;</span>

<span style="color: #408080; font-style: italic"># agreement</span>
<span style="color: #008000">read</span> -p <span style="color: #BA2121">&quot;Do you agree? (y/n): &quot;</span> yn
<span style="color: #008000; font-weight: bold">case</span> <span style="color: #19177C">$yn</span> in 
y|Y|yes|Yes|YEs|yEs|yES|YeS|YES <span style="color: #666666">)</span> <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Great, I appreciate that!&quot;</span>;;
n|N|no|No|nO|NO <span style="color: #666666">)</span> <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;OK then don&#39;t use this tool please :)\n\n&quot;</span>; <span style="color: #008000">exit </span>1;;
* <span style="color: #666666">)</span> <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;${RED}Invalid input, abort.\n${NC}&quot;</span>; <span style="color: #008000">exit </span>1;;
<span style="color: #008000; font-weight: bold">esac</span>
sleep 0.5

<span style="color: #408080; font-style: italic"># ready to use</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;\n\nOK. Enough intro, let&#39;s input your request for bechmarking your site now.&quot;</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;\nThis program is build by ${RED}@bydzen @ (https://github.com/bydzen)\n\n${NC}&quot;</span>
sleep 0.5

<span style="color: #408080; font-style: italic"># number request</span>
<span style="color: #008000">read</span> -p <span style="color: #BA2121">&quot;Please input your request number: &quot;</span> reqval
<span style="color: #008000; font-weight: bold">if</span> ! <span style="color: #666666">[[</span> <span style="color: #BA2121">&quot;$reqval&quot;</span> <span style="color: #666666">=</span>~ ^<span style="color: #666666">[</span>0-9<span style="color: #666666">]</span>+<span style="color: #19177C">$ </span><span style="color: #666666">]]</span> ; 
<span style="color: #008000; font-weight: bold">then </span><span style="color: #008000">exec</span> &gt;&amp;2; <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;${RED}error: Not a number!\n${NC}&quot;</span>; <span style="color: #008000">exit </span>1
<span style="color: #008000; font-weight: bold">fi</span>
<span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">[</span> <span style="color: #19177C">$reqval</span> -gt 9999999 <span style="color: #666666">]</span>
<span style="color: #008000; font-weight: bold">then </span><span style="color: #008000">exec</span> &gt;&amp;2; <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;${RED}error: Too much requests!\n${NC}&quot;</span>; <span style="color: #008000">exit </span>1
<span style="color: #008000; font-weight: bold">fi</span>
sleep 0.5
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Input: ${GREEN}$reqval request(s)${NC} saved.\n&quot;</span>
sleep 0.5

<span style="color: #408080; font-style: italic"># numnber of concurrent</span>
<span style="color: #008000">read</span> -p <span style="color: #BA2121">&quot;Please input your concurrent number: &quot;</span> conval
<span style="color: #008000; font-weight: bold">if</span> ! <span style="color: #666666">[[</span> <span style="color: #BA2121">&quot;$conval&quot;</span> <span style="color: #666666">=</span>~ ^<span style="color: #666666">[</span>0-9<span style="color: #666666">]</span>+<span style="color: #19177C">$ </span><span style="color: #666666">]]</span> ; 
<span style="color: #008000; font-weight: bold">then </span><span style="color: #008000">exec</span> &gt;&amp;2; <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;${RED}error: Not a number!\n${NC}&quot;</span>; <span style="color: #008000">exit </span>1
<span style="color: #008000; font-weight: bold">fi</span>
<span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">[</span> <span style="color: #19177C">$conval</span> -gt 9999999 <span style="color: #666666">]</span>
<span style="color: #008000; font-weight: bold">then </span><span style="color: #008000">exec</span> &gt;&amp;2; <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;${RED}error: Too much concurrents!\n${NC}&quot;</span>; <span style="color: #008000">exit </span>1
<span style="color: #008000; font-weight: bold">fi</span>
sleep 0.5
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Input: ${GREEN}$conval concurrent(s)${NC} saved.\n&quot;</span>
sleep 0.5

<span style="color: #408080; font-style: italic"># is use http or https?</span>
<span style="color: #008000">read</span> -p <span style="color: #BA2121">&quot;Is your website using https/ssl enabled? (y/n): &quot;</span> yn
<span style="color: #008000; font-weight: bold">case</span> <span style="color: #19177C">$yn</span> in 
y|Y|yes|Yes|YEs|yEs|yES|YeS|YES <span style="color: #666666">)</span> <span style="color: #19177C">procval</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;https://&quot;</span>;;
n|N|no|No|nO|NO <span style="color: #666666">)</span> <span style="color: #19177C">procval</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;http://&quot;</span>;;
* <span style="color: #666666">)</span> <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;${RED}Invalid input, abort.\n${NC}&quot;</span>; <span style="color: #008000">exit </span>1;;
<span style="color: #008000; font-weight: bold">esac</span>
sleep 0.5
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Protocol: ${GREEN}$procval${NC} saved.\n&quot;</span>
sleep 0.5

<span style="color: #408080; font-style: italic"># domain or ip address destination</span>
<span style="color: #008000">read</span> -p <span style="color: #BA2121">&quot;Please input your ip/domain destination (e.g. yoursite.com): &quot;</span> siteval
sleep 0.5
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Destination: ${GREEN}$procval$siteval/${NC} saved.\n&quot;</span>
sleep 0.5

<span style="color: #408080; font-style: italic"># use log file (log-benchmark.txt)?</span>
<span style="color: #008000">read</span> -p <span style="color: #BA2121">&quot;Output log file? (y/n): &quot;</span> yn
<span style="color: #008000; font-weight: bold">case</span> <span style="color: #19177C">$yn</span> in 
y|Y|yes|Yes|YEs|yEs|yES|YeS|YES<span style="color: #666666">)</span> sleep 0.5; <span style="color: #19177C">logval</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Yes&quot;</span>; <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Using log: ${GREEN}Yes.${NC}\n&quot;</span>; <span style="color: #19177C">logfile</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot; -e log-benchmark.txt &quot;</span>;;
n|N|no|No|nO|NO <span style="color: #666666">)</span> sleep 0.5; <span style="color: #19177C">logval</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;No&quot;</span>; <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Using log: ${RED}No.${NC}\n&quot;</span>; <span style="color: #19177C">logfile</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot; &quot;</span>;;
* <span style="color: #666666">)</span> <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;${RED}Invalid input, abort\n${NC}&quot;</span>; <span style="color: #008000">exit </span>1;;
<span style="color: #008000; font-weight: bold">esac</span>
sleep 0.5

<span style="color: #408080; font-style: italic"># full generated information</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;\nExecuting apache benchmark as shown:\n&quot;</span>
sleep 0.1
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Number of request(s)    : $reqval\n&quot;</span>
sleep 0.1
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Number of concurrent(s) : $conval\n&quot;</span>
sleep 0.1
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Protocol                : $procval\n&quot;</span>
sleep 0.1
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Destination             : $siteval\n&quot;</span>
sleep 0.1
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Save log                : $logval\n&quot;</span>
sleep 0.1
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Result CLI              : ab -n $reqval -c $conval$logfile$procval$siteval/\n\n&quot;</span>
sleep 0.1
<span style="color: #008000">read</span> -p <span style="color: #BA2121">&quot;If the information is correct, confirm to perform benchmank execution. (y/n): &quot;</span> yn
<span style="color: #008000; font-weight: bold">case</span> <span style="color: #19177C">$yn</span> in 
y|Y|yes|Yes|YEs|yEs|yES|YeS|YES<span style="color: #666666">)</span> ;;
n|N|no|No|nO|NO <span style="color: #666666">)</span> <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Abort.&quot;</span>; <span style="color: #008000">exit </span>1;;
* <span style="color: #666666">)</span> <span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;${RED}Invalid input, abort.\n${NC}&quot;</span>; <span style="color: #008000">exit </span>1;;
<span style="color: #008000; font-weight: bold">esac</span>

<span style="color: #408080; font-style: italic"># delay 1 second</span>
sleep 1

<span style="color: #408080; font-style: italic"># cancelling information 2</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;NOTE: press ${REDBOLD}CTRL + C${NC} for abort or cancel this request.\n\n&quot;</span>
sleep 2

<span style="color: #408080; font-style: italic"># loading to execute</span>
<span style="color: #008000">printf</span> <span style="color: #BA2121">&quot;Executing...\n&quot;</span>
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=&gt;                      (4%)\r&#39;</span>
sleep 0.1
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;==&gt;                     (11%)\r&#39;</span>
sleep 0.1
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;===&gt;                    (17%)\r&#39;</span>
sleep 0.1
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;====&gt;                   (28%)\r&#39;</span>
sleep 0.1
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=====&gt;                  (33%)\r&#39;</span>
sleep 0.1
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=======&gt;                (49%)\r&#39;</span>
sleep 0.1
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=============&gt;          (68%)\r&#39;</span>
sleep 0.1
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;===================&gt;    (84%)\r&#39;</span>
sleep 0.2
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=====================&gt;  (96%)\r&#39;</span>
sleep 0.2
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;=======================&gt;(100%)\r&#39;</span>
sleep 0.5
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;                              \r&#39;</span>
<span style="color: #008000">echo</span> -ne <span style="color: #BA2121">&#39;\n&#39;</span>

<span style="color: #408080; font-style: italic"># delay 1 second</span>
sleep 1

<span style="color: #408080; font-style: italic"># execute command ab for apache2 benchmark </span>
ab -n <span style="color: #19177C">$reqval</span> -c <span style="color: #19177C">$conval$logfile$procval$siteval</span>/
</pre>
                        </div>
                        <a
                            class="btn btn-dark mt-3"
                            href="https://github.com/rayatiga/apache2-benchmark/"
                            rel="nofollow noopener noreferrer"
                            target="_blank"
                            >Visit Repository</a
                        >
                    </div>
                </div>
            </div>
        </main>
        <footer></footer>
    </body>
</html>
